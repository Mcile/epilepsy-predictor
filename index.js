var I=Object.defineProperty;var A=(t,e,s)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var a=(t,e,s)=>A(t,typeof e!="symbol"?e+"":e,s);class O{constructor(e){a(this,"attr_subscribers",new Set);a(this,"class_subscribers",new Set);a(this,"style_subscribers",new Set);a(this,"prop_subscribers",new Set);a(this,"effect_subscribers",new Set);this.value=e}}var E=!1,h=[];function v(t){let e=[],s=h;h=e,E=!0;let i=t();return h=s,[e,i]}function k(t,e,s){t.getAttribute(e)!==s&&t.setAttribute(e,s)}function w(t,e,s){t.classList.contains(e)?!s&&t.classList.remove(e):t.classList.add(e)}function j(t,e,s){t.style[e]!==s&&(t.style[e]=s)}function S(t,e,s){t[e]!==s&&(t[e]=s)}let C={attr_subscribers:k,class_subscribers:w,style_subscribers:j,prop_subscribers:S,effect_subscribers:t=>t()};function F(t,e={}){e=Object.assign({},{alwaysUpdate:!1},e);let s=new O(t),i=n=>{if(n!=null){let r=n instanceof Function?n(s.value):n,l=e.alwaysUpdate||!e.alwaysUpdate&&s.value!=r;typeof s.value=="object"?(l=!0,r&&typeof r=="object"&&Object.assign(s.value,r)):s.value=r,l&&["attr_subscribers","class_subscribers","style_subscribers","prop_subscribers","effect_subscribers"].forEach(o=>s[o].forEach(([b,p,u])=>C[o](b,p,u==null?void 0:u())))}return E&&h.push(s),typeof s.value=="object"?Object.assign({},s.value):s.value};return i.signal_instance=s,i}function M(...t){t.length==1?requestIdleCallback(()=>{let e=t[0],[s,i]=v(e);s.forEach(n=>n.effect_subscribers.add([e]))}):requestIdleCallback(()=>{let e=t[0];t[1].forEach(i=>i.signal_instance.effect_subscribers.add([e])),e()})}function R(){let t={element:null},e=()=>t.element;return e.ref=t,e}class d{constructor(e){a(this,"element_name");a(this,"attrs_setting",{});a(this,"class_setting",{});a(this,"style_setting",{});a(this,"props_setting",{});a(this,"event_listeners",[]);a(this,"child_elements",[]);a(this,"ref");this.element_name=e}attrs(e){return Object.assign(this.attrs_setting,e),this}class(e){const s=i=>String(i).replace(/\s+/g," ").split(" ").forEach(n=>this.class_setting[n]=!0);return Array.isArray(e)?e.flat().forEach(i=>{if(typeof i=="object")for(let n in i){let r=i[n];this.class_setting[n]=typeof r=="function"?r:!!r}else s(i)}):s(e),this}style(e){const s=n=>{for(let r in n){let l=n[r];this.style_setting[r]=typeof l=="function"?l:String(l)}},i=n=>{String(n).split(";").forEach(r=>{let[l,o]=r.split(":");this.style_setting[l.replace(/\s+/g,"")]=o})};return typeof e=="object"?Array.isArray(e)?e.forEach(n=>typeof n=="object"?s(n):i(n)):s(e):i(e),this}props(e){return Object.assign(this.props_setting,e),this}$ref(e){return this.ref=e,this}on(e,s){return this.event_listeners.push([e,s]),this}children(...e){return this.child_elements=e.flat(),this}build(){let e=document.createElement(this.element_name);const s=(i,n,r)=>{Object.entries(i).forEach(([l,o])=>{let b=o;if(typeof o=="function"){let[p,u]=v(o);p.forEach(G=>n(G,e,l,o)),b=u}r(e,l,b)})};s(this.attrs_setting,(i,n,r,l)=>i.attr_subscribers.add([n,r,l]),k),s(this.class_setting,(i,n,r,l)=>i.class_subscribers.add([n,r,l]),w),s(this.style_setting,(i,n,r,l)=>i.style_subscribers.add([n,r,l]),j),s(this.props_setting,(i,n,r,l)=>i.prop_subscribers.add([n,r,l]),S),this.event_listeners.forEach(([i,n])=>e.addEventListener(i,n));for(let i of this.child_elements)i&&e.append(i instanceof d||i instanceof m?i.build():i);return this.ref&&(this.ref.ref.element=e),e}clone(){let e=new d(this.element_name);return e.attrs_setting=Object.assign({},this.attrs_setting),e.class_setting=Object.assign({},this.class_setting),e.style_setting=Object.assign({},this.style_setting),e.props_setting=Object.assign({},this.props_setting),e.event_listeners=this.event_listeners.slice(),e.child_elements=this.child_elements.slice(),e}}function c(t){return new d(t)}function T(t,...e){let s=e.map(i=>i instanceof d||i instanceof m||i instanceof x?i.build():i);t.append(...s),s.forEach(i=>i.onmount_hooks.forEach(n=>n()))}function P(t){for(let e in t){let s=t[e];typeof s!="function"&&(t[e]=()=>s)}return t}class x{constructor(e){a(this,"init_callback");this.init_callback=e}props(e){return new m(()=>this.init_callback(P(e)))}build(){return this.props({}).build()}}class m{constructor(e){a(this,"init_callback");a(this,"element_builder");a(this,"onmount_hooks",new Set);this.init_callback=s=>e(s)}build(){this.element_builder??(this.element_builder=this.init_callback());let e=this.element_builder.build();return e.onmount_hooks=this.onmount_hooks,e}}function y(t){return new x(t)}const L=y(t=>(t=t,c("div").style("padding:0.25em;border:1px solid gray").children(c("label").style("display:inline-block;width:100%").children(c("input").style("margin-right:0.5em").attrs({type:"checkbox"}).on("click",e=>_(s=>s[t.name()]=e.target.checked)),t.name())))),q=y(t=>(t=t,c("div").class("vbox").style("padding:0.5em;border:1px solid gray").children(t.name(),c("label").children(c("input").attrs({type:"radio",name:t.name(),checked:"true"}).on("change",()=>_(e=>e[t.name()]=!0)),t.optionA()),c("label").children(c("input").attrs({type:"radio",name:t.name()}).on("change",()=>_(e=>e[t.name()]=!1)),t.optionB())))),g={"Febrile convulsion in childhood":.58221562,"History of SGTC":-.597837001,"Positive MRI":.779324877,"Interictal EEG findings":.530628251,"Ictal EEG findings":.463734016,"EEG at 1 week":-2.995732274,"EEG at 3 months":-.994252273,"EEG at 1 year":-1.237874356,"The consistency between VEEG and MR":1.137833002,"Hippocampal sclerosis":.530628251,FCD:-.356674944,Tumor:-.544727175},f={"Age at surgery":["<20 years old",">=20 years old",1.199964783],Frequency:[">30 times/month","=<30 times/month",-1.386294361],"Side of surgery":["Right side","Left side",.412109651],"Site of surgery":["Temporal lobe","Extratemporal lobe",.598836501],"Extent of final resection":["Complete resection","Incomplete resection",.641853886]};let _=F({"Febrile convulsion in childhood":!1,"History of SGTC":!1,"Positive MRI":!1,"Interictal EEG findings":!1,"Ictal EEG findings":!1,"EEG at 1 week":!1,"EEG at 3 months":!1,"EEG at 1 year":!1,"The consistency between VEEG and MR":!1,"Hippocampal sclerosis":!1,FCD:!1,Tumor:!1,"Age at surgery":!0,Frequency:!0,"Side of surgery":!0,"Site of surgery":!0,"Extent of final resection":!0});const z=y(()=>{let t=R();return M(()=>{let e=_();const s=1.283;let i=0;for(let r in g)i+=g[r]*Number(e[r]);for(let r in f)i+=f[r][2]*Number(e[r]);let n=Math.exp(s+i)/(1+Math.exp(s+i))*100;n>100&&(n=100),n<0&&(n=0),t().parentElement.style.color=n>50?"green":"orange",t().textContent=n.toFixed(3)+"%"}),c("div").class(["vbox","center"]).style("width:980px;height:100vh").children(c("div").style("font-size:1.5em").children("A Novel Clinical Prediction Model for Sugical Efficacy in Epilepsy"),c("div").style("height:1em"),c("div").class("hbox").style("padding:0.5em;width:90%;border:2px solid black").children(c("div").children(...Object.keys(g).map(e=>L.props({name:e}))),c("div").style("margin-left:1em").children(...Object.keys(f).map(e=>q.props({name:e,optionA:f[e][0],optionB:f[e][1]}))),c("div").class(["vbox","expand"]).style("color:green;font-size:large;align-items:center;justify-content:center").children("Probability of Seizure-free",c("div").$ref(t))))});T(document.getElementById("app"),z);
